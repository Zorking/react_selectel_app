import React, { Component } from 'react';
import { Line } from 'react-chartjs-2';

class Metric extends Component {
  constructor(props) {
    super(props);
    this.state = {
      metrics: null,
    };
  }

  getMetrics() {'127.0.0.1:8000/servers/f6a56cf4-d02a-49c7-a555-1b887ac96df9/metrics/ram/?viewer_id=19048154&project_name=it_works'
    axios.post('https://itjustworks.me:8443/servers/'+this.props.serverDetail.id+'/metrics/ram/'+localStorage.getItem('location'), {'project_name': this.props.serverDetail.projectName}, {'headers':{'Authorization':localStorage.getItem('token')}})
      .then((response) => {
        console.log(response.body);
        this.setState({metrics: response.body});
        console.log('Done')
      })
  }

  render() {
    const x = this.state.metrics.map((e)=> {
      const d = new Date(e[0]);
      return d.getHours()+':'+d.getMinutes()
    });
    const y = this.state.metrics.map((e)=> e[2] );
    const data = {
      labels: x,
      datasets: [
        {
          label: this.props.label,
          fill: false,
          lineTension: 0.1,
          backgroundColor: 'rgba(75,192,192,0.4)',
          borderColor: 'rgba(75,192,192,1)',
          borderCapStyle: 'butt',
          borderDash: [],
          borderDashOffset: 0.0,
          borderJoinStyle: 'miter',
          pointBorderColor: 'rgba(75,192,192,1)',
          pointBackgroundColor: '#fff',
          pointBorderWidth: 1,
          pointHoverRadius: 5,
          pointHoverBackgroundColor: 'rgba(75,192,192,1)',
          pointHoverBorderColor: 'rgba(220,220,220,1)',
          pointHoverBorderWidth: 2,
          pointRadius: 1,
          pointHitRadius: 10,
          data: y
        }
      ]
    };
    return <Line data={data} />
  }
}

export default Metric;



const metrics_old = [
  [
    "2017-10-21T15:30:00+00:00",
    300.0,
    459.0
  ],
  [
    "2017-10-21T15:35:00+00:00",
    300.0,
    459.0
  ],
  [
    "2017-10-21T15:40:00+00:00",
    300.0,
    459.0
  ],
  [
    "2017-10-21T15:45:00+00:00",
    300.0,
    460.0
  ],
  [
    "2017-10-21T15:50:00+00:00",
    300.0,
    460.0
  ],
  [
    "2017-10-21T15:55:00+00:00",
    300.0,
    461.0
  ],
  [
    "2017-10-21T16:00:00+00:00",
    300.0,
    461.0
  ],
  [
    "2017-10-21T16:05:00+00:00",
    300.0,
    461.0
  ],
  [
    "2017-10-21T16:10:00+00:00",
    300.0,
    461.0
  ],
  [
    "2017-10-21T16:15:00+00:00",
    300.0,
    461.0
  ],
  [
    "2017-10-21T16:20:00+00:00",
    300.0,
    462.0
  ],
  [
    "2017-10-21T16:25:00+00:00",
    300.0,
    462.0
  ],
  [
    "2017-10-21T16:30:00+00:00",
    300.0,
    462.0
  ],
  [
    "2017-10-21T16:35:00+00:00",
    300.0,
    462.0
  ],
  [
    "2017-10-21T16:40:00+00:00",
    300.0,
    462.0
  ],
  [
    "2017-10-21T16:45:00+00:00",
    300.0,
    462.0
  ],
  [
    "2017-10-21T16:50:00+00:00",
    300.0,
    463.0
  ],
  [
    "2017-10-21T16:55:00+00:00",
    300.0,
    463.0
  ],
  [
    "2017-10-21T17:00:00+00:00",
    300.0,
    463.0
  ],
  [
    "2017-10-21T17:05:00+00:00",
    300.0,
    463.0
  ],
  [
    "2017-10-21T17:10:00+00:00",
    300.0,
    464.0
  ],
  [
    "2017-10-21T17:15:00+00:00",
    300.0,
    464.0
  ],
  [
    "2017-10-21T17:20:00+00:00",
    300.0,
    464.0
  ],
  [
    "2017-10-21T17:25:00+00:00",
    300.0,
    465.0
  ],
  [
    "2017-10-21T17:30:00+00:00",
    300.0,
    465.0
  ],
  [
    "2017-10-21T17:35:00+00:00",
    300.0,
    465.0
  ],
  [
    "2017-10-21T17:40:00+00:00",
    300.0,
    465.0
  ],
  [
    "2017-10-21T17:45:00+00:00",
    300.0,
    466.0
  ],
  [
    "2017-10-21T17:50:00+00:00",
    300.0,
    466.0
  ],
  [
    "2017-10-21T17:55:00+00:00",
    300.0,
    467.0
  ],
  [
    "2017-10-21T18:00:00+00:00",
    300.0,
    467.0
  ],
  [
    "2017-10-21T18:05:00+00:00",
    300.0,
    467.0
  ],
  [
    "2017-10-21T18:10:00+00:00",
    300.0,
    467.0
  ],
  [
    "2017-10-21T18:15:00+00:00",
    300.0,
    467.0
  ],
  [
    "2017-10-21T18:20:00+00:00",
    300.0,
    467.0
  ],
  [
    "2017-10-21T18:25:00+00:00",
    300.0,
    468.0
  ],
  [
    "2017-10-21T18:30:00+00:00",
    300.0,
    468.0
  ],
  [
    "2017-10-21T18:35:00+00:00",
    300.0,
    468.0
  ],
  [
    "2017-10-21T18:40:00+00:00",
    300.0,
    468.0
  ],
  [
    "2017-10-21T18:45:00+00:00",
    300.0,
    466.0
  ],
  [
    "2017-10-21T18:50:00+00:00",
    300.0,
    466.0
  ],
  [
    "2017-10-21T18:55:00+00:00",
    300.0,
    466.0
  ],
  [
    "2017-10-21T19:00:00+00:00",
    300.0,
    469.0
  ],
  [
    "2017-10-21T19:05:00+00:00",
    300.0,
    469.0
  ],
  [
    "2017-10-21T19:10:00+00:00",
    300.0,
    470.0
  ],
  [
    "2017-10-21T19:15:00+00:00",
    300.0,
    469.0
  ],
  [
    "2017-10-21T19:20:00+00:00",
    300.0,
    469.0
  ],
  [
    "2017-10-21T19:25:00+00:00",
    300.0,
    470.0
  ],
  [
    "2017-10-21T19:30:00+00:00",
    300.0,
    470.0
  ],
  [
    "2017-10-21T19:35:00+00:00",
    300.0,
    470.0
  ],
  [
    "2017-10-21T19:40:00+00:00",
    300.0,
    470.0
  ],
  [
    "2017-10-21T19:45:00+00:00",
    300.0,
    470.0
  ],
  [
    "2017-10-21T19:50:00+00:00",
    300.0,
    470.0
  ],
  [
    "2017-10-21T19:55:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:00:00+00:00",
    300.0,
    577.0
  ],
  [
    "2017-10-21T20:05:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:10:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:15:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:20:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:25:00+00:00",
    300.0,
    575.0
  ],
  [
    "2017-10-21T20:30:00+00:00",
    300.0,
    575.0
  ],
  [
    "2017-10-21T20:35:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:40:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:45:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T20:50:00+00:00",
    300.0,
    576.0
  ],
 [
    "2017-10-21T20:55:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T21:00:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T21:05:00+00:00",
    300.0,
    576.0
  ],
  [
    "2017-10-21T21:10:00+00:00",
    300.0,
    578.0
  ],
  [
    "2017-10-21T21:15:00+00:00",
    300.0,
    180.0
  ]
]